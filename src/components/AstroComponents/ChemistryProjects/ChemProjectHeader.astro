---
// component import
import { Icon } from "astro-icon";
import OtherHeader from "@components/AstroIslands/Common/OtherHeader";
import BackButton from "@components/AstroComponents/Common/BackButton.astro";


// function import
import { slugify, formatDate, capitalizeWords } from "@js/utils";

// style import
import "./styles/ChemProjectHeader.scss";

// // destructuring astro properties
const {   title, status, duration, tags, pubDate, journalName, isOpenAccess, journalUrl, codeUrl, runUrl, dockerUrl, newsUrl } = Astro.props;

const currentDate = new Date();
---

<>
  <OtherHeader client:only="react" />
  <header class="chemProjectHeaderContainer">
    <BackButton
      text="Back"
      customStyle="margin-bottom:30px; padding: 15px 22px;"
      icon={{
        name: "tabler:arrow-big-left-line",
        side: "left",
      }}
    />
    <div class="chemProjectHeaderElements">
      <h1 class="title">{title}</h1>
      <p class="tagsContainer">
        {
          tags.map((tag: string) => (
            <a href={`/projects/chemistry/tag/${slugify(tag)}`}>
              <span class="tagBadge">#{slugify(tag)}</span>
            </a>
          ))
        }
      </p>
      <p class="tagsContainer">
        <Icon
          name="ion:hourglass-outline"
          class="customIcon"
          height="24"
          width="24"
        />
        {duration} {
          currentDate > pubDate ? (
            <> â€¢
              <Icon name="mdi:calendar" class="customIcon" height="24" width="24" />
              {formatDate(pubDate)}
            </>
            ) : (<></>)
          }
      </p>
      <p><strong>Status:</strong> {capitalizeWords(status)}</p>
      {journalName!== null ? (isOpenAccess === true ? 
          (
            <div class="journalDetailsDiv">
              <h4>{journalName}</h4> 
              <Icon class="isOpenAccessIcon" name="mdi:lock-open-variant" />
            </div>
          ) : 
          (
            <div class="journalDetailsDiv">
              <h4>{journalName}</h4> 
              <Icon class="isOpenAccessIcon" name="mdi:lock" />
            </div>
          ) 
        ):(<></>) }
      <div>
        {journalUrl && (
          <a href={journalUrl} class="pubRelatedLinks" target="_blank" title="Journal Link" >
            <Icon name="tabler:external-link" height="30" width="30" />
          </a>
        )}
        {codeUrl && (
          <a href={codeUrl} class="pubRelatedLinks" target="_blank" title="GitHub Repo" >
            <Icon name="mdi:github" height="30" width="30" />
          </a>
        )}
        {runUrl && (
          <a href={runUrl} class="pubRelatedLinks" target="_blank" title="Run Online" >
            <Icon name="codicon:run-all" height="30" width="30" />
          </a>
        )}
        {dockerUrl && (
          <a href={dockerUrl} class="pubRelatedLinks" target="_blank" title="Build Docker Image" >
            <Icon name="mdi:docker" height="30" width="30" />
          </a>
        )}
        {newsUrl && (
          <a href={newsUrl} class="pubRelatedLinks" target="_blank" title="Newspaper Review" >
            <Icon name="emojione-monotone:newspaper" height="30" width="30" />
          </a>
        )}
      </div>
    </div>
  </header>
</>
